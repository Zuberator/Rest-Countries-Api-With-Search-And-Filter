<!doctype html>
<html>

<head>
    <title>Countries</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script defer src="functions.js"></script>
    <script defer src="https://code.iconify.design/iconify-icon/1.0.0/iconify-icon.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <nav>
            <a href="./">
                <h2>Where in the world?</h2>
            </a>
            <div id="dark">
                <iconify-icon inline icon="ri:moon-line" width="20" height="20"></iconify-icon>&nbsp&nbspDark Mode
            </div>
        </nav>
    </header>

    <script>
        const countryName = new URLSearchParams(window.location.search).get('country')

        fetch("https://restcountries.com/v3.1/all")
            .then(res => res.json())
            .then(data => {
                Countries = data.map(country => {
                    if (country.name.common === countryName) {
                        // CARD
                        const card = document.createElement("div")
                        card.classList.add("card")
                        // FLAG
                        const flag = document.createElement("img")
                        flag.classList.add("flag")
                        flag.setAttribute("src", country.flags.png);
                        // BODY
                        const body = document.createElement("div")
                        body.classList.add("body")
                        // NAME
                        const name = document.createElement("h4")
                        name.classList.add("name")
                        name.textContent = country.name.common
                        // NATIVENAME
                        const nativeName = document.createElement("p")
                        nativeName.classList.add("nativename")
                        nativeName.innerHTML = "Native Name: " + `<span>${Object.values(country.name.nativeName)[0].common}</span>`
                        // POPULATION
                        const population = document.createElement("p")
                        population.classList.add("population")
                        population.innerHTML = "Population: " + `<span>${country.population}</span>`
                        // REGION
                        const region = document.createElement("p")
                        region.classList.add("region")
                        region.innerHTML = "Region: " + `<span>${country.region}</span>`
                        // SUBREGION
                        const subRegion = document.createElement("p")
                        subRegion.classList.add("subregion")
                        subRegion.innerHTML = "Sub Region: " + `<span>${country.subRegion}</span>`
                        // CAPITAL
                        const capital = document.createElement("p")
                        capital.classList.add("capital")
                        capital.innerHTML = "Capital: " + `<span>${country.capital}</span>`
                        // TOPLEVELDOMAIN
                        const topLevelDomain = document.createElement("p")
                        topLevelDomain.classList.add("topleveldomain")
                        topLevelDomain.innerHTML = "Top Level Domain: " + `<span>${country.tld}</span>`
                        // CURRENCIES
                        const currencies = document.createElement("p")
                        currencies.classList.add("currencies")
                        currencies.innerHTML = "Currencies: " + `<span>${Object.values(country.currencies)[0].name}</span>`
                        // LANGUAGES
                        const languages = document.createElement("p")
                        languages.classList.add("languages")
                        languages.innerHTML = "Languages: " + `<span>${Object.values(country.languages)}</span>`
                        // BORDERCOUNTRIES
                        const borderCountries = document.createElement("p")
                        borderCountries.classList.add("bordercountries")
                        borderCountries.innerHTML = "Border Countries: " + `<span>${country.borders}</span>`

                        // APPEND
                        body.append(name, nativeName, population, region, capital, topLevelDomain, currencies, languages, borderCountries)
                        card.append(flag)
                        card.append(body)
                        userCardContainer.append(card)

                        return {
                            flag: country.flags.png,
                            name: country.name.common,
                            nativeName: country.name.nativeName.common || "",
                            population: country.population,
                            region: country.region,
                            subRegion: country.subRegion,
                            capital: country.capital && country.capital[0] || "",
                            topLevelDomain: country.tld,
                            currencies: country.currencies,
                            languages: Object.values(country.languages),
                            borderCountries: country.borders,
                            element: card
                        }
                    }
                })
            })
    </script>

    <main>
        <div class="wrapper">

            <div class="user-cards" data-user-cards-container></div>

        </div>
    </main>

    <footer></footer>

</body>

</html>



<!-- $id = $_GET["id"];


<?php
$id = $_GET["id"];
$res = $db->query("SELECT * FROM blog WHERE id=$id");
foreach ($res as $row) { {
    echo "<div class='blog-big' data-inviewport='top-load' style='--delay:1s'>";
    echo "<h1>" . $row['Title'] . "</h1>";
    echo "<img src='" . $row["Image"] . "' loading='lazy' alt='Avatar' class=''/>";
    echo "<p>" . $row['Text'] . "</p>";
    echo "<p>Napisane przez " . $row['User'] . " w dniu " . $row['Date'] . "</p>";
    echo "<p>KOMENTARZE</p>";
    echo "</div>";
  }
  $dbh = null;
}
?> -->